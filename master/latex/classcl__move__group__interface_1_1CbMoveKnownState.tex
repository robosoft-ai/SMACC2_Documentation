\hypertarget{classcl__move__group__interface_1_1CbMoveKnownState}{}\doxysection{cl\+\_\+move\+\_\+group\+\_\+interface\+::Cb\+Move\+Known\+State Class Reference}
\label{classcl__move__group__interface_1_1CbMoveKnownState}\index{cl\_move\_group\_interface::CbMoveKnownState@{cl\_move\_group\_interface::CbMoveKnownState}}


{\ttfamily \#include $<$cb\+\_\+move\+\_\+known\+\_\+state.\+hpp$>$}



Inheritance diagram for cl\+\_\+move\+\_\+group\+\_\+interface\+::Cb\+Move\+Known\+State\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classcl__move__group__interface_1_1CbMoveKnownState__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for cl\+\_\+move\+\_\+group\+\_\+interface\+::Cb\+Move\+Known\+State\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcl__move__group__interface_1_1CbMoveKnownState__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcl__move__group__interface_1_1CbMoveKnownState_abd9a6ff0a5aa0333852f5ea1522bc932}{Cb\+Move\+Known\+State}} (std\+::string pkg, std\+::string config\+\_\+path)
\item 
virtual \mbox{\hyperlink{classcl__move__group__interface_1_1CbMoveKnownState_a50cb63899a41d9e9cee7c9af3e8160d5}{$\sim$\+Cb\+Move\+Known\+State}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::map$<$ std\+::string, double $>$ \mbox{\hyperlink{classcl__move__group__interface_1_1CbMoveKnownState_a3998d6e04560c6c4f36a3cb6f6a86780}{load\+Joint\+States\+From\+File}} (std\+::string pkg, std\+::string filepath)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


Definition at line 29 of file cb\+\_\+move\+\_\+known\+\_\+state.\+hpp.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classcl__move__group__interface_1_1CbMoveKnownState_abd9a6ff0a5aa0333852f5ea1522bc932}\label{classcl__move__group__interface_1_1CbMoveKnownState_abd9a6ff0a5aa0333852f5ea1522bc932}} 
\index{cl\_move\_group\_interface::CbMoveKnownState@{cl\_move\_group\_interface::CbMoveKnownState}!CbMoveKnownState@{CbMoveKnownState}}
\index{CbMoveKnownState@{CbMoveKnownState}!cl\_move\_group\_interface::CbMoveKnownState@{cl\_move\_group\_interface::CbMoveKnownState}}
\doxysubsubsection{\texorpdfstring{CbMoveKnownState()}{CbMoveKnownState()}}
{\footnotesize\ttfamily cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Move\+Known\+State\+::\+Cb\+Move\+Known\+State (\begin{DoxyParamCaption}\item[{std\+::string}]{pkg,  }\item[{std\+::string}]{config\+\_\+path }\end{DoxyParamCaption})}



Definition at line 29 of file cb\+\_\+move\+\_\+known\+\_\+state.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{30 : \mbox{\hyperlink{classcl__move__group__interface_1_1CbMoveJoints_a085919fd766e50098cbe9782de3303c6}{CbMoveJoints}}(\mbox{\hyperlink{classcl__move__group__interface_1_1CbMoveKnownState_a3998d6e04560c6c4f36a3cb6f6a86780}{loadJointStatesFromFile}}(pkg, config\_path))}
\DoxyCodeLine{31 \{}
\DoxyCodeLine{32 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classcl__move__group__interface_1_1CbMoveKnownState_a50cb63899a41d9e9cee7c9af3e8160d5}\label{classcl__move__group__interface_1_1CbMoveKnownState_a50cb63899a41d9e9cee7c9af3e8160d5}} 
\index{cl\_move\_group\_interface::CbMoveKnownState@{cl\_move\_group\_interface::CbMoveKnownState}!````~CbMoveKnownState@{$\sim$CbMoveKnownState}}
\index{````~CbMoveKnownState@{$\sim$CbMoveKnownState}!cl\_move\_group\_interface::CbMoveKnownState@{cl\_move\_group\_interface::CbMoveKnownState}}
\doxysubsubsection{\texorpdfstring{$\sim$CbMoveKnownState()}{~CbMoveKnownState()}}
{\footnotesize\ttfamily cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Move\+Known\+State\+::$\sim$\+Cb\+Move\+Known\+State (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Definition at line 34 of file cb\+\_\+move\+\_\+known\+\_\+state.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{34 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classcl__move__group__interface_1_1CbMoveKnownState_a3998d6e04560c6c4f36a3cb6f6a86780}\label{classcl__move__group__interface_1_1CbMoveKnownState_a3998d6e04560c6c4f36a3cb6f6a86780}} 
\index{cl\_move\_group\_interface::CbMoveKnownState@{cl\_move\_group\_interface::CbMoveKnownState}!loadJointStatesFromFile@{loadJointStatesFromFile}}
\index{loadJointStatesFromFile@{loadJointStatesFromFile}!cl\_move\_group\_interface::CbMoveKnownState@{cl\_move\_group\_interface::CbMoveKnownState}}
\doxysubsubsection{\texorpdfstring{loadJointStatesFromFile()}{loadJointStatesFromFile()}}
{\footnotesize\ttfamily std\+::map$<$ std\+::string, double $>$ cl\+\_\+move\+\_\+group\+\_\+interface\+::\+Cb\+Move\+Known\+State\+::load\+Joint\+States\+From\+File (\begin{DoxyParamCaption}\item[{std\+::string}]{pkg,  }\item[{std\+::string}]{filepath }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 37 of file cb\+\_\+move\+\_\+known\+\_\+state.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{39 \{}
\DoxyCodeLine{40   \textcolor{comment}{//auto pkgpath = ros::package::getPath(pkg);}}
\DoxyCodeLine{41   std::string pkgpath = ament\_index\_cpp::get\_package\_share\_directory(pkg);}
\DoxyCodeLine{42 }
\DoxyCodeLine{43   std::map<std::string, double> jointStates;}
\DoxyCodeLine{44 }
\DoxyCodeLine{45   \textcolor{keywordflow}{if} (pkgpath == \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{46   \{}
\DoxyCodeLine{47     RCLCPP\_ERROR\_STREAM(}
\DoxyCodeLine{48       \mbox{\hyperlink{classsmacc2_1_1ISmaccClientBehavior_a5474074c4b45e900499e30126fb8415c}{getLogger}}(),}
\DoxyCodeLine{49       \textcolor{stringliteral}{"{}[CbMoveKnownState] package not found for the known poses file: "{}} << pkg << std::endl}
\DoxyCodeLine{50                                                                         << \textcolor{stringliteral}{"{} [IGNORING BEHAVIOR]"{}});}
\DoxyCodeLine{51     \textcolor{keywordflow}{return} jointStates;}
\DoxyCodeLine{52   \}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54   filepath = pkgpath + \textcolor{stringliteral}{"{}/"{}} + filepath;}
\DoxyCodeLine{55 }
\DoxyCodeLine{56   RCLCPP\_INFO(}
\DoxyCodeLine{57     \mbox{\hyperlink{classsmacc2_1_1ISmaccClientBehavior_a5474074c4b45e900499e30126fb8415c}{getLogger}}(), \textcolor{stringliteral}{"{}[CbMoveKnownState] Opening file with joint known state: \%s"{}}, filepath.c\_str());}
\DoxyCodeLine{58 }
\DoxyCodeLine{59   \textcolor{keywordflow}{if} (std::filesystem::exists(filepath))}
\DoxyCodeLine{60   \{}
\DoxyCodeLine{61     RCLCPP\_INFO\_STREAM(\mbox{\hyperlink{classsmacc2_1_1ISmaccClientBehavior_a5474074c4b45e900499e30126fb8415c}{getLogger}}(), \textcolor{stringliteral}{"{}[CbMoveKnownState] known state file exists: "{}} << filepath);}
\DoxyCodeLine{62   \}}
\DoxyCodeLine{63   \textcolor{keywordflow}{else}}
\DoxyCodeLine{64   \{}
\DoxyCodeLine{65     RCLCPP\_ERROR\_STREAM(}
\DoxyCodeLine{66       \mbox{\hyperlink{classsmacc2_1_1ISmaccClientBehavior_a5474074c4b45e900499e30126fb8415c}{getLogger}}(), \textcolor{stringliteral}{"{}[CbMoveKnownState] known state file does not exists: "{}} << filepath);}
\DoxyCodeLine{67   \}}
\DoxyCodeLine{68 }
\DoxyCodeLine{69   std::ifstream ifs(filepath.c\_str(), std::ifstream::in);}
\DoxyCodeLine{70   \textcolor{keywordflow}{if} (ifs.good() == \textcolor{keyword}{false})}
\DoxyCodeLine{71   \{}
\DoxyCodeLine{72     RCLCPP\_ERROR(}
\DoxyCodeLine{73       \mbox{\hyperlink{classsmacc2_1_1ISmaccClientBehavior_a5474074c4b45e900499e30126fb8415c}{getLogger}}(), \textcolor{stringliteral}{"{}[CbMoveKnownState] Error opening file with joint known states: \%s"{}},}
\DoxyCodeLine{74       filepath.c\_str());}
\DoxyCodeLine{75     \textcolor{keywordflow}{throw} std::string(\textcolor{stringliteral}{"{}joint state files not found"{}});}
\DoxyCodeLine{76   \}}
\DoxyCodeLine{77 }
\DoxyCodeLine{78   \textcolor{keywordflow}{try}}
\DoxyCodeLine{79   \{}
\DoxyCodeLine{80 \textcolor{preprocessor}{\#ifdef HAVE\_NEW\_YAMLCPP}}
\DoxyCodeLine{81     YAML::Node node = YAML::Load(ifs);}
\DoxyCodeLine{82 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{83     YAML::Parser \mbox{\hyperlink{namespacegenerate__debs_a4a9ae4bb85fc62d7973ea3d09ced6c26}{parser}}(ifs);}
\DoxyCodeLine{84     \mbox{\hyperlink{namespacegenerate__debs_a4a9ae4bb85fc62d7973ea3d09ced6c26}{parser}}.GetNextDocument(node);}
\DoxyCodeLine{85 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{86 }
\DoxyCodeLine{87 \textcolor{preprocessor}{\#ifdef HAVE\_NEW\_YAMLCPP}}
\DoxyCodeLine{88     \textcolor{keyword}{const} YAML::Node \& wp\_node\_tmp = node[\textcolor{stringliteral}{"{}joint\_states"{}}];}
\DoxyCodeLine{89     \textcolor{keyword}{const} YAML::Node * wp\_node = wp\_node\_tmp ? \&wp\_node\_tmp : NULL;}
\DoxyCodeLine{90 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{91     \textcolor{keyword}{const} YAML::Node * wp\_node = node.FindValue(\textcolor{stringliteral}{"{}waypoints"{}});}
\DoxyCodeLine{92 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     \textcolor{keywordflow}{if} (wp\_node != NULL)}
\DoxyCodeLine{95     \{}
\DoxyCodeLine{96       \textcolor{keywordflow}{try}}
\DoxyCodeLine{97       \{}
\DoxyCodeLine{98         \textcolor{keywordflow}{for} (YAML::const\_iterator it = wp\_node-\/>begin(); it != wp\_node-\/>end(); ++it)}
\DoxyCodeLine{99         \{}
\DoxyCodeLine{100           std::string key = it-\/>first.as<std::string>();}
\DoxyCodeLine{101           \textcolor{keywordtype}{double} value = it-\/>second.as<\textcolor{keywordtype}{double}>();}
\DoxyCodeLine{102           RCLCPP\_DEBUG\_STREAM(\mbox{\hyperlink{classsmacc2_1_1ISmaccClientBehavior_a5474074c4b45e900499e30126fb8415c}{getLogger}}(), \textcolor{stringliteral}{"{} joint -\/ "{}} << key << \textcolor{stringliteral}{"{}: "{}} << value);}
\DoxyCodeLine{103           jointStates[key] = value;}
\DoxyCodeLine{104         \}}
\DoxyCodeLine{105 }
\DoxyCodeLine{106         \textcolor{keywordflow}{return} jointStates;}
\DoxyCodeLine{107       \}}
\DoxyCodeLine{108       \textcolor{keywordflow}{catch} (std::exception \& ex)}
\DoxyCodeLine{109       \{}
\DoxyCodeLine{110         RCLCPP\_ERROR(\mbox{\hyperlink{classsmacc2_1_1ISmaccClientBehavior_a5474074c4b45e900499e30126fb8415c}{getLogger}}(), \textcolor{stringliteral}{"{}trying to convert to map, failed, errormsg: \%s"{}}, ex.what());}
\DoxyCodeLine{111       \}}
\DoxyCodeLine{112 }
\DoxyCodeLine{113       RCLCPP\_INFO\_STREAM(\mbox{\hyperlink{classsmacc2_1_1ISmaccClientBehavior_a5474074c4b45e900499e30126fb8415c}{getLogger}}(), \textcolor{stringliteral}{"{}Parsed "{}} << jointStates.size() << \textcolor{stringliteral}{"{} joint entries."{}});}
\DoxyCodeLine{114     \}}
\DoxyCodeLine{115     \textcolor{keywordflow}{else}}
\DoxyCodeLine{116     \{}
\DoxyCodeLine{117       RCLCPP\_WARN\_STREAM(\mbox{\hyperlink{classsmacc2_1_1ISmaccClientBehavior_a5474074c4b45e900499e30126fb8415c}{getLogger}}(), \textcolor{stringliteral}{"{}Couldn't find any jointStates in the provided yaml file."{}});}
\DoxyCodeLine{118     \}}
\DoxyCodeLine{119   \}}
\DoxyCodeLine{120   \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} YAML::ParserException \& ex)}
\DoxyCodeLine{121   \{}
\DoxyCodeLine{122     RCLCPP\_ERROR\_STREAM(}
\DoxyCodeLine{123       \mbox{\hyperlink{classsmacc2_1_1ISmaccClientBehavior_a5474074c4b45e900499e30126fb8415c}{getLogger}}(), \textcolor{stringliteral}{"{}Error loading the Waypoints YAML file. Incorrect syntax: "{}} << ex.what());}
\DoxyCodeLine{124   \}}
\DoxyCodeLine{125   \textcolor{keywordflow}{return} jointStates;}
\DoxyCodeLine{126 \}}

\end{DoxyCode}


References smacc2\+::\+ISmacc\+Client\+Behavior\+::get\+Logger(), and generate\+\_\+debs\+::parser.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classcl__move__group__interface_1_1CbMoveKnownState_a3998d6e04560c6c4f36a3cb6f6a86780_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
smacc2\+\_\+client\+\_\+library/move\+\_\+group\+\_\+interface\+\_\+client/include/move\+\_\+group\+\_\+interface\+\_\+client/client\+\_\+behaviors/\mbox{\hyperlink{cb__move__known__state_8hpp}{cb\+\_\+move\+\_\+known\+\_\+state.\+hpp}}\item 
smacc2\+\_\+client\+\_\+library/move\+\_\+group\+\_\+interface\+\_\+client/src/move\+\_\+group\+\_\+interface\+\_\+client/client\+\_\+behaviors/\mbox{\hyperlink{cb__move__known__state_8cpp}{cb\+\_\+move\+\_\+known\+\_\+state.\+cpp}}\end{DoxyCompactItemize}
