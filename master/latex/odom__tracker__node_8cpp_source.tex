\hypertarget{odom__tracker__node_8cpp_source}{}\doxysection{odom\+\_\+tracker\+\_\+node.\+cpp}
\label{odom__tracker__node_8cpp_source}\index{smacc2\_client\_library/nav2z\_client/nav2z\_client/src/nav2z\_client/components/odom\_tracker/odom\_tracker\_node.cpp@{smacc2\_client\_library/nav2z\_client/nav2z\_client/src/nav2z\_client/components/odom\_tracker/odom\_tracker\_node.cpp}}
\mbox{\hyperlink{odom__tracker__node_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00001}00001 \textcolor{comment}{// Copyright 2021 RobosoftAI Inc.}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00002}00002 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00003}00003 \textcolor{comment}{// Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00004}00004 \textcolor{comment}{// you may not use this file except in compliance with the License.}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00005}00005 \textcolor{comment}{// You may obtain a copy of the License at}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00006}00006 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00007}00007 \textcolor{comment}{//     http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00008}00008 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00009}00009 \textcolor{comment}{// Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00010}00010 \textcolor{comment}{// distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00011}00011 \textcolor{comment}{// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00012}00012 \textcolor{comment}{// See the License for the specific language governing permissions and}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00013}00013 \textcolor{comment}{// limitations under the License.}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00015}00015 \textcolor{comment}{/*****************************************************************************************************************}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00016}00016 \textcolor{comment}{ *}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00017}00017 \textcolor{comment}{ *   Authors: Pablo Inigo Blasco, Brett Aldrich}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00018}00018 \textcolor{comment}{ *}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00019}00019 \textcolor{comment}{ ******************************************************************************************************************/}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00020}00020 \textcolor{preprocessor}{\#include <actionlib/server/simple\_action\_server.h>}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00021}00021 \textcolor{preprocessor}{\#include <odom\_tracker/OdomTrackerAction.h>}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00022}00022 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00023}00023 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{odom__tracker_8hpp}{nav2z\_client/components/odom\_tracker/odom\_tracker.hpp}}>}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00025}\mbox{\hyperlink{odom__tracker__node_8cpp_a9884574d0480319430f628f79afc0500}{00025}} \textcolor{keyword}{typedef} actionlib::SimpleActionServer<odom\_tracker::OdomTrackerAction> \mbox{\hyperlink{odom__tracker__node_8cpp_a9884574d0480319430f628f79afc0500}{Server}};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00027}00027 \textcolor{keyword}{using namespace }odom\_tracker;}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00028}00028 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespacecl__nav2z_1_1odom__tracker}{cl\_nav2z::odom\_tracker}};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00030}\mbox{\hyperlink{classOdomTrackerActionServer}{00030}} \textcolor{keyword}{class }\mbox{\hyperlink{classOdomTrackerActionServer}{OdomTrackerActionServer}}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00031}00031 \{}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00032}00032 \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00033}\mbox{\hyperlink{classOdomTrackerActionServer_a28bed1d95003d837b2b47053dbc66878}{00033}}   std::shared\_ptr<Server> \mbox{\hyperlink{classOdomTrackerActionServer_a28bed1d95003d837b2b47053dbc66878}{as\_}};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00034}\mbox{\hyperlink{classOdomTrackerActionServer_a3e5c4328d3206fbd2fd2708f0aefe651}{00034}}   \mbox{\hyperlink{classcl__nav2z_1_1odom__tracker_1_1OdomTracker}{OdomTracker}} \mbox{\hyperlink{classOdomTrackerActionServer_a3e5c4328d3206fbd2fd2708f0aefe651}{odomTracker}};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00036}\mbox{\hyperlink{classOdomTrackerActionServer_a98b7fba6da04e1afcf1000f937be7fef}{00036}}   \mbox{\hyperlink{classOdomTrackerActionServer_a98b7fba6da04e1afcf1000f937be7fef}{OdomTrackerActionServer}}() : \mbox{\hyperlink{classOdomTrackerActionServer_a3e5c4328d3206fbd2fd2708f0aefe651}{odomTracker}}(\textcolor{stringliteral}{"{}move\_base"{}}) \{\}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00043}\mbox{\hyperlink{classOdomTrackerActionServer_afa69287377bb2a12c5346cbe8d68cb04}{00043}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classOdomTrackerActionServer_afa69287377bb2a12c5346cbe8d68cb04}{execute}}(}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00044}00044     \textcolor{keyword}{const} OdomTrackerGoalConstPtr \& goal)  \textcolor{comment}{// Note: "{}Action"{} is not appended to DoDishes here}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00045}00045   \{}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00046}00046     \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00047}00047     \{}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00048}00048       \textcolor{keywordflow}{switch} (goal-\/>command)}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00049}00049       \{}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00050}00050         \textcolor{keywordflow}{case} OdomTrackerGoal::RECORD\_PATH:}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00051}00051           \mbox{\hyperlink{classOdomTrackerActionServer_a3e5c4328d3206fbd2fd2708f0aefe651}{odomTracker}}.\mbox{\hyperlink{classcl__nav2z_1_1odom__tracker_1_1OdomTracker_a90c99c722785303974f6e5690b8d8471}{setWorkingMode}}(WorkingMode::RECORD\_PATH);}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00052}00052           \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00054}00054         \textcolor{keywordflow}{case} OdomTrackerGoal::CLEAR\_PATH:}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00055}00055           \mbox{\hyperlink{classOdomTrackerActionServer_a3e5c4328d3206fbd2fd2708f0aefe651}{odomTracker}}.\mbox{\hyperlink{classcl__nav2z_1_1odom__tracker_1_1OdomTracker_a90c99c722785303974f6e5690b8d8471}{setWorkingMode}}(WorkingMode::CLEAR\_PATH);}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00056}00056           \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00058}00058         \textcolor{keywordflow}{case} OdomTrackerGoal::IDLE:}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00059}00059           \mbox{\hyperlink{classOdomTrackerActionServer_a3e5c4328d3206fbd2fd2708f0aefe651}{odomTracker}}.\mbox{\hyperlink{classcl__nav2z_1_1odom__tracker_1_1OdomTracker_a90c99c722785303974f6e5690b8d8471}{setWorkingMode}}(WorkingMode::IDLE);}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00060}00060           \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00061}00061 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00062}00062         \textcolor{keywordflow}{case} OdomTrackerGoal::START\_BROADCAST\_PATH:}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00063}00063           \mbox{\hyperlink{classOdomTrackerActionServer_a3e5c4328d3206fbd2fd2708f0aefe651}{odomTracker}}.\mbox{\hyperlink{classcl__nav2z_1_1odom__tracker_1_1OdomTracker_a5d67bc2cf4d9298779d661b8731f618d}{setPublishMessages}}(\textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00064}00064           \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00066}00066         \textcolor{keywordflow}{case} OdomTrackerGoal::STOP\_BROADCAST\_PATH:}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00067}00067           \mbox{\hyperlink{classOdomTrackerActionServer_a3e5c4328d3206fbd2fd2708f0aefe651}{odomTracker}}.\mbox{\hyperlink{classcl__nav2z_1_1odom__tracker_1_1OdomTracker_a5d67bc2cf4d9298779d661b8731f618d}{setPublishMessages}}(\textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00068}00068           \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00069}00069 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00070}00070         \textcolor{keywordflow}{case} OdomTrackerGoal::PUSH\_PATH:}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00071}00071           \mbox{\hyperlink{classOdomTrackerActionServer_a3e5c4328d3206fbd2fd2708f0aefe651}{odomTracker}}.\mbox{\hyperlink{classcl__nav2z_1_1odom__tracker_1_1OdomTracker_a053e983334ba4c2a69d4c17a7c82775f}{pushPath}}();}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00072}00072           \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00074}00074         \textcolor{keywordflow}{case} OdomTrackerGoal::POP\_PATH:}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00075}00075           \mbox{\hyperlink{classOdomTrackerActionServer_a3e5c4328d3206fbd2fd2708f0aefe651}{odomTracker}}.\mbox{\hyperlink{classcl__nav2z_1_1odom__tracker_1_1OdomTracker_a97897e654afeb53e8a0ee2da6fdd91bf}{popPath}}();}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00076}00076           \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00077}00077 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00078}00078         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00079}00079 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00080}00080           RCLCPP\_ERROR(}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00081}00081             getLogger(), \textcolor{stringliteral}{"{}Odom Tracker Node -\/ Action Server execute error: incorrect command -\/ \%d"{}},}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00082}00082             goal-\/>command);}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00083}00083           \mbox{\hyperlink{classOdomTrackerActionServer_a28bed1d95003d837b2b47053dbc66878}{as\_}}-\/>setAborted();}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00084}00084       \}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00085}00085 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00086}00086       \textcolor{comment}{// never reach succeeded because were are interested in keeping the feedback alive}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00087}00087       \mbox{\hyperlink{classOdomTrackerActionServer_a28bed1d95003d837b2b47053dbc66878}{as\_}}-\/>setSucceeded();}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00088}00088     \}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00089}00089     \textcolor{keywordflow}{catch} (std::exception \& ex)}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00090}00090     \{}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00091}00091       RCLCPP\_ERROR(getLogger(), \textcolor{stringliteral}{"{}Odom Tracker Node -\/ Action Server execute error: \%s"{}}, ex.what());}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00092}00092       \mbox{\hyperlink{classOdomTrackerActionServer_a28bed1d95003d837b2b47053dbc66878}{as\_}}-\/>setAborted();}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00093}00093     \}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00094}00094   \}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00095}00095 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00101}\mbox{\hyperlink{classOdomTrackerActionServer_a8ab6984c7383949a048d72437e9f79d3}{00101}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classOdomTrackerActionServer_a8ab6984c7383949a048d72437e9f79d3}{run}}()}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00102}00102   \{}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00103}00103     rclcpp::Node::SharedPtr n;}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00104}00104     RCLCPP\_INFO(getLogger(), \textcolor{stringliteral}{"{}Creating odom tracker action server"{}});}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00105}00105 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00106}00106     \mbox{\hyperlink{classOdomTrackerActionServer_a28bed1d95003d837b2b47053dbc66878}{as\_}} = std::make\_shared<Server>(}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00107}00107       n, \textcolor{stringliteral}{"{}odom\_tracker"{}}, boost::bind(\&\mbox{\hyperlink{classOdomTrackerActionServer_afa69287377bb2a12c5346cbe8d68cb04}{OdomTrackerActionServer::execute}}, \textcolor{keyword}{this}, \_1), \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00108}00108     RCLCPP\_INFO(getLogger(), \textcolor{stringliteral}{"{}Starting OdomTracker Action Server"{}});}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00109}00109 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00110}00110     \mbox{\hyperlink{classOdomTrackerActionServer_a28bed1d95003d837b2b47053dbc66878}{as\_}}-\/>start();}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00111}00111 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00112}00112     ros::spin();}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00113}00113   \}}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00114}00114 \};}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00115}00115 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00116}\mbox{\hyperlink{odom__tracker__node_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{00116}} \textcolor{keywordtype}{int} \mbox{\hyperlink{odom__tracker__node_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} ** argv)}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00117}00117 \{}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00118}00118   ros::init(argc, argv, \textcolor{stringliteral}{"{}odom\_tracker\_node"{}});}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00119}00119   \mbox{\hyperlink{classOdomTrackerActionServer}{OdomTrackerActionServer}} as;}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00120}00120 }
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00121}00121   as.\mbox{\hyperlink{classOdomTrackerActionServer_a8ab6984c7383949a048d72437e9f79d3}{run}}();}
\DoxyCodeLine{\Hypertarget{odom__tracker__node_8cpp_source_l00122}00122 \}}

\end{DoxyCode}
