<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SMACC2: SMACC2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SMACC2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">SMACC2 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >SMACC2 is an event-driven, asynchronous, behavioral state machine library for real-time ROS2 (Robotic Operating System) applications written in C++, designed to allow programmers to build robot control applications for multicomponent robots, in an intuitive and systematic manner.</p>
<p >SMACC was inspired by Harel's statecharts and the <a href="http://wiki.ros.org/smach">SMACH ROS package</a>. SMACC is built on top of the <a href="https://www.boost.org/doc/libs/1_53_0/libs/statechart/doc/index.html">Boost StateChart library</a>.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Repository Status, Packages and Documentation</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">ROS2 Distro   </th><th class="markdownTableHeadCenter">Branch   </th><th class="markdownTableHeadCenter">Build status   </th><th class="markdownTableHeadCenter">Documentation   </th><th class="markdownTableHeadCenter">Released packages    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><b>Foxy</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/robosoft-ai/SMACC2/tree/foxy"><code>foxy</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/robosoft-ai/SMACC2/actions/workflows/foxy-binary-build.yml?branch=foxy"><img src="https://github.com/robosoft-ai/SMACC2/actions/workflows/foxy-binary-build.yml/badge.svg?branch=foxy" alt="Foxy Binary Build" style="pointer-events: none;" class="inline"/></a> <br  />
 <a href="https://github.com/robosoft-ai/SMACC2/actions/workflows/foxy-semi-binary-build.yml?branch=foxy"><img src="https://github.com/robosoft-ai/SMACC2/actions/workflows/foxy-semi-binary-build.yml/badge.svg?branch=foxy" alt="Foxy Semi-Binary Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/robosoft-ai/SMACC2/actions/workflows/doxygen-deploy.yml"><img src="https://github.com/robosoft-ai/SMACC2/actions/workflows/doxygen-deploy.yml/badge.svg" alt="Doxygen Doc Deployment" style="pointer-events: none;" class="inline"/></a> <br  />
 <a href="https://robosoft-ai.github.io/SMACC2_Documentation/foxy/html/namespacesmacc2.html">Generated Doc</a>   </td><td class="markdownTableBodyCenter"><a href="https://index.ros.org/p/smacc2/github-robosoft-ai-SMACC2/#foxy">SMACC2</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><b>Galactic</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/robosoft-ai/SMACC2/tree/galactic"><code>galactic</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/robosoft-ai/SMACC2/actions/workflows/galactic-binary-build.yml?branch=galactic"><img src="https://github.com/robosoft-ai/SMACC2/actions/workflows/galactic-binary-build.yml/badge.svg?branch=galactic" alt="Galactic Binary Build" style="pointer-events: none;" class="inline"/></a> <br  />
 <a href="https://github.com/robosoft-ai/SMACC2/actions/workflows/galactic-semi-binary-build.yml?branch=galactic"><img src="https://github.com/robosoft-ai/SMACC2/actions/workflows/galactic-semi-binary-build.yml/badge.svg?branch=galactic" alt="Galactic Semi-Binary Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/robosoft-ai/SMACC2/actions/workflows/doxygen-deploy.yml"><img src="https://github.com/robosoft-ai/SMACC2/actions/workflows/doxygen-deploy.yml/badge.svg" alt="Doxygen Doc Deployment" style="pointer-events: none;" class="inline"/></a> <br  />
 <a href="https://robosoft-ai.github.io/SMACC2_Documentation/galactic/html/namespacesmacc2.html">Generated Doc</a>   </td><td class="markdownTableBodyCenter"><a href="https://index.ros.org/p/smacc2/github-robosoft-ai-SMACC2/#galactic">SMACC2</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><b>Humble</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/robosoft-ai/SMACC2/tree/humble"><code>humble</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/robosoft-ai/SMACC2/actions/workflows/humble-binary-build.yml"><img src="https://github.com/robosoft-ai/SMACC2/actions/workflows/humble-binary-build.yml/badge.svg" alt="Humble Binary Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter"><a href="https://index.ros.org/p/smacc2/github-robosoft-ai-SMACC2/#humble">SMACC2</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><b>Rolling</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/robosoft-ai/SMACC2/tree/rolling"><code>rolling</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/robosoft-ai/SMACC2/actions/workflows/rolling-binary-build.yml?branch=rolling"><img src="https://github.com/robosoft-ai/SMACC2/actions/workflows/rolling-binary-build.yml/badge.svg?branch=rolling" alt="Rolling Binary Build" style="pointer-events: none;" class="inline"/></a> <br  />
 <a href="https://github.com/robosoft-ai/SMACC2/actions/workflows/rolling-semi-binary-build.yml?branch=rolling"><img src="https://github.com/robosoft-ai/SMACC2/actions/workflows/rolling-semi-binary-build.yml/badge.svg?branch=rolling" alt="Rolling Semi-Binary Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/robosoft-ai/SMACC2/actions/workflows/doxygen-deploy.yml"><img src="https://github.com/robosoft-ai/SMACC2/actions/workflows/doxygen-deploy.yml/badge.svg" alt="Doxygen Doc Deployment" style="pointer-events: none;" class="inline"/></a> <br  />
 <a href="https://robosoft-ai.github.io/SMACC2_Documentation/master/html/namespacesmacc2.html">Generated Doc</a>   </td><td class="markdownTableBodyCenter"><a href="https://index.ros.org/p/smacc2/github-robosoft-ai-SMACC2/#rolling">SMACC2</a>   </td></tr>
</table>
<p ><b>NOTE</b>: There are three build stages checking current and future compatibility of the package.</p>
<ol type="1">
<li><p class="startli">Binary builds - against released packages (main and testing) in ROS distributions. Shows that direct local build is possible.</p>
<p class="startli">Uses repos file: <code>src/SMACC2/SMACC2-not-released.&lt;ros-distro&gt;.repos</code></p>
</li>
</ol>
<ol type="1">
<li><p class="startli">Semi-binary builds - against released core ROS packages (main and testing), but the immediate dependencies are pulled from source. Shows that local build with dependencies is possible and if fails there we can expect that after the next package sync we will not be able to build.</p>
<p class="startli">Uses repos file: <code>src/SMACC2/SMACC2.repos</code></p>
</li>
</ol>
<ol type="1">
<li>Source build - also core ROS packages are build from source. It shows potential issues in the mid future.</li>
</ol>
<h1><a class="anchor" id="autotoc_md7"></a>
Getting started - ROS Rolling + Ubuntu 20.04 (Focal)</h1>
<ol type="1">
<li><a href="https://index.ros.org/doc/ros2/Installation/Rolling/Linux-Install-Debians/">Install ROS2 Rolling</a>.</li>
<li>Make sure that <code>colcon</code>, its extensions and <code>vcs</code> are installed: <div class="fragment"><div class="line">sudo apt install python3-colcon-common-extensions python3-vcstool</div>
</div><!-- fragment --></li>
<li>Create a new ROS2 workspace if necessary: <div class="fragment"><div class="line">export COLCON_WS=~/workspace/rolling_ws</div>
<div class="line">mkdir -p $COLCON_WS/src</div>
</div><!-- fragment --></li>
<li>Or just navigate to your workspace source folder: <div class="fragment"><div class="line">cd ~/workspace/rolling_ws/src</div>
</div><!-- fragment --></li>
<li>Clone the repo: <div class="fragment"><div class="line">git clone https://github.com/robosoft-ai/SMACC2.git</div>
</div><!-- fragment --></li>
<li>Navigate to the workspace: <div class="fragment"><div class="line">cd ~/workspace/rolling_ws</div>
</div><!-- fragment --></li>
<li>Update System: <div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt upgrade</div>
</div><!-- fragment --></li>
<li>Source the workspace: <div class="fragment"><div class="line">source /opt/ros/rolling/setup.bash</div>
</div><!-- fragment --></li>
<li>Update dependencies: <div class="fragment"><div class="line">rosdep update</div>
</div><!-- fragment --></li>
<li>Pull relevant packages and install dependencies: <div class="fragment"><div class="line">vcs import src --skip-existing --input src/SMACC2/SMACC2-not-released.rolling.repos</div>
<div class="line">rosdep install --ignore-src --from-paths src -y -r</div>
</div><!-- fragment --></li>
<li>Compile: <div class="fragment"><div class="line">colcon build --cmake-args -DCMAKE_BUILD_TYPE=Release</div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="autotoc_md8"></a>
Getting started - ROS Galactic</h1>
<ol type="1">
<li><a href="https://docs.ros.org/en/galactic/Installation/Ubuntu-Install-Debians.html">Install ROS2 Galactic</a>.</li>
<li>Make sure that <code>colcon</code>, its extensions and <code>vcs</code> are installed: <div class="fragment"><div class="line">sudo apt install python3-colcon-common-extensions python3-vcstool</div>
</div><!-- fragment --></li>
<li>Create a new ROS2 workspace if necessary: <div class="fragment"><div class="line">export COLCON_WS=~/workspace/galactic_ws</div>
<div class="line">mkdir -p $COLCON_WS/src</div>
</div><!-- fragment --></li>
<li>Or just navigate to your workspace source folder: <div class="fragment"><div class="line">cd ~/workspace/galactic_ws/src</div>
</div><!-- fragment --></li>
<li>Clone the repo: <div class="fragment"><div class="line">git clone https://github.com/robosoft-ai/SMACC2.git</div>
</div><!-- fragment --></li>
<li>Checkout the Galactic branch: <div class="fragment"><div class="line">cd ~/workspace/galactic_ws/src/SMACC2</div>
<div class="line">git checkout galactic</div>
</div><!-- fragment --></li>
<li>Navigate to the workspace: <div class="fragment"><div class="line">cd ~/workspace/galactic_ws</div>
</div><!-- fragment --></li>
<li>Update System: <div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt upgrade</div>
</div><!-- fragment --></li>
<li>Source the workspace: <div class="fragment"><div class="line">source /opt/ros/galactic/setup.bash</div>
</div><!-- fragment --></li>
<li>Update dependencies: <div class="fragment"><div class="line">rosdep update</div>
</div><!-- fragment --></li>
<li>Pull relevant packages and install dependencies: <div class="fragment"><div class="line">vcs import src --skip-existing --input src/SMACC2/SMACC2.galactic.repos</div>
<div class="line">rosdep install --ignore-src --from-paths src -y -r</div>
</div><!-- fragment --></li>
<li>Compile: <div class="fragment"><div class="line">colcon build --cmake-args -DCMAKE_BUILD_TYPE=Release</div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="autotoc_md9"></a>
Getting started - ROS Foxy</h1>
<ol type="1">
<li><a href="https://docs.ros.org/en/foxy/Installation/Ubuntu-Install-Debians.html">Install ROS2 Foxy</a>.</li>
<li>Make sure that <code>colcon</code>, its extensions and <code>vcs</code> are installed: <div class="fragment"><div class="line">sudo apt install python3-colcon-common-extensions python3-vcstool</div>
</div><!-- fragment --></li>
<li>Create a new ROS2 workspace if necessary: <div class="fragment"><div class="line">export COLCON_WS=~/workspace/foxy_ws</div>
<div class="line">mkdir -p $COLCON_WS/src</div>
</div><!-- fragment --></li>
<li>Or just navigate to your workspace source folder: <div class="fragment"><div class="line">cd ~/workspace/foxy_ws/src</div>
</div><!-- fragment --></li>
<li>Clone the repo: <div class="fragment"><div class="line">git clone https://github.com/robosoft-ai/SMACC2.git</div>
</div><!-- fragment --></li>
<li>Checkout the Foxy branch: <div class="fragment"><div class="line">cd ~/workspace/foxy_ws/src/SMACC2</div>
<div class="line">git checkout foxy</div>
</div><!-- fragment --></li>
<li>Navigate to the workspace: <div class="fragment"><div class="line">cd ~/workspace/foxy_ws</div>
</div><!-- fragment --></li>
<li>Update System: <div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt upgrade</div>
</div><!-- fragment --></li>
<li>Source the workspace: <div class="fragment"><div class="line">source /opt/ros/foxy/setup.bash</div>
</div><!-- fragment --></li>
<li>Update dependencies: <div class="fragment"><div class="line">rosdep update</div>
</div><!-- fragment --></li>
<li>Pull relevant packages and install dependencies: <div class="fragment"><div class="line">vcs import src --skip-existing --input src/SMACC2/SMACC2.foxy.repos</div>
<div class="line">rosdep install --ignore-src --from-paths src -y -r</div>
</div><!-- fragment --></li>
<li>Compile: <div class="fragment"><div class="line">colcon build --cmake-args -DCMAKE_BUILD_TYPE=Release</div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="autotoc_md10"></a>
Features</h1>
<ul>
<li><em><b>Powered by ROS2:</b></em> SMACC2 has been developed specifically to work with ROS2. It supports ROS2 topics, services and actions, right out of the box.</li>
<li><em><b>Written in C++:</b></em> Until now, ROS2 has lacked a library to develop task-level behavioral state machines in C++. Although libraries have been developed in scripting languages such as python, these are unsuitable for real-world industrial environments where real-time requirements are demanded.</li>
<li><em><b>Orthogonals:</b></em> Originally conceived by David Harel in 1987, orthogonality is absolutely crucial to developing state machines for complex robotic systems. This is because complex robots are always a collection of hardware devices which require communication protocols, start-up determinism, etc. With orthogonals, it is an intuitive and relatively straight forward exercise (at least conceptually;) to code a state machine for a robot comprising a mobile base, a robotic arm, a gripper, two lidar sensors, a gps transceiver and an imu, for instance.</li>
<li><em><b>Static State Machine Checking:</b></em> One of the features that SMACC2 inherits from Boost Statechart is that you get compile time validation checking. This benefits developers in that the amount of runtime testing necessary to ship quality software that is both stable and safe is dramatically reduced. Our philosophy is "Wherever possible, let the compiler do it".</li>
<li><em><b>State Machine Reference Library:</b></em> With a constantly growing library of out-of-the-box reference state machines, (found in the folder [sm_reference_library](smacc2_sm_reference_library)) guaranteed to compile and run, you can jumpstart your development efforts by choosing a reference machine that is closest to your needs, and then customize and extend to meet the specific requirements of your robotic application. All the while knowing that the library supports advanced functionalities that are practically universal among actual working robots.</li>
<li><em><b>SMACC2 Client Library:</b></em> SMACC2 also features a constantly growing library of [clients](smacc2_client_library) that support ROS2 Action Servers, Service Servers and other nodes right out-of-the box. The clients within the SMACC2 Client library have been built utilizing a component based architecture that allows for developer to build powerful clients of their own. Current clients of note include MoveBaseZ, a full featured Action Client built to integrate with Nav2, the ros_timer_client, the multi_role_sensor_client, and a keyboard_client used extensively for state machine drafting &amp; debugging.<ul>
<li><em><b>Extensive Documentation:</b></em> Although many ROS users are familiar with doxygen, our development team has spent a lot of time researching the more advanced features of doxygen such as uml style class diagrams and call graphs, and we've used them to document the SMACC2 library. Have a look to <a href="https://robosoft-ai.github.io/SMACC2_Documentation/master/html/namespaces.html">our doxygen sites</a> and we think you'll be blown away at what Doxygen looks like when <a href="https://robosoft-ai.github.io/SMACC2_Documentation/master/html/classsmacc2_1_1ISmaccStateMachine.html">it's done right</a> and it becomes a powerful tool to research a codebase.</li>
<li><em><b>SMACC2 Runtime Analyzer:</b></em> The SMACC2 library works out of the box with the SMACC2 RTA. This allows developers to visualize and runtime debug the state machines they are working on. The SMACC2 RTA is closed source, but is free for individual and academic use. It can be found <a href="https://robosoft.ai/product-category/smacc2-runtime-analyzer/">here</a>.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
Repository Structure</h1>
<ul>
<li><code><a class="el" href="namespacesmacc2.html">smacc2</a></code> - core library of SMACC2.</li>
<li><code>smacc2_ci</code> - ...</li>
<li><code>smacc2_client_library</code> - client libraries for SMACC2, e.g., Navigation2 (<code>nav2z_client</code>), MoveIt2 (<code>move_group_interface_client</code>).</li>
<li><code>smacc2_event_generators</code> - ...</li>
<li><code>smacc2_msgs</code> - ROS2 messages for SMACC2 framework.</li>
<li><code>smacc2_sm_reference_library</code> - libraries with reference implementations of state-machines used for demonstaration and testing of functionalities.</li>
<li><code>↓smacc2_state_reactor_library</code> - ...</li>
<li><code>smacc2_performance_tools</code> - ...</li>
</ul>
<h1><a class="anchor" id="autotoc_md12"></a>
SMACC2 applications</h1>
<p >From it's inception, SMACC2 was written to support the programming of multi-component, complex robots. If your project involves small, solar-powered insect robots, that simply navigate towards a light source, then SMACC2 might not be the right choice for you. But if you are trying to program a robot with a mobile base, a robotic arm, a gripper, two lidar sensors, a gps transceiver and an imu, then you've come to the right place.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Run a State Machine</h1>
<p >The easiest way to get started is by selecting one of the state machines in our [reference library](smacc2_sm_reference_library), and then hacking it to meet your needs.</p>
<p >Each state machine in the reference library comes with it's own README.md file, which contains the appropriate operating instructions, so that all you have to do is simply copy &amp; paste some commands into your terminal.</p>
<ul>
<li>If you are looking for a minimal example, we recommend <a href="smacc2_sm_reference_library/sm_atomic">sm_atomic</a>.</li>
<li>If you are looking for a minimal example but with a looping superstate, try <a href="smacc2_sm_reference_library/sm_three_some">sm_three_some</a>.</li>
<li>If you want to get started with the ROS Navigation stack right away, try <a href="smacc2_sm_reference_library/sm_dance_bot">sm_dance_bot</a>.</li>
<li>If you want to get started with ROS Navigation and exploring the orthogonal read-write cycle, then try <a href="smacc2_sm_reference_library/sm_dance_bot_strikes_back">sm_dance_bot_strikes_back</a>.</li>
</ul>
<p >Operating instructions can be found in each reference state machines readme file.</p>
<h1><a class="anchor" id="autotoc_md14"></a>
Writing your State Machines</h1>
<p >There is a <a href="smacc2_sm_reference_library/create-sm-package.bash">state machine generator in the reference library</a>. To use it go to the <code>src</code> folder of your ROS2 workspace and execute: </p><div class="fragment"><div class="line">smacc2/smacc2_sm_reference_library/create-sm-package.bash &lt;name_of_state_machine&gt;</div>
</div><!-- fragment --><p> After than compile your workspace and source it to set paths of the new package. Check <code>README.md</code> in new package about instructions to start newly created state machine.</p>
<p >Happy Coding!</p>
<h1><a class="anchor" id="autotoc_md15"></a>
Support</h1>
<p >If you are interested in getting involved or need a little support, feel free to contact us by emailing <a href="#" onclick="location.href='mai'+'lto:'+'tec'+'hs'+'upp'+'or'+'t@r'+'ob'+'oso'+'ft'+'.ai'; return false;">techs<span class="obfuscator">.nosp@m.</span>uppo<span class="obfuscator">.nosp@m.</span>rt@ro<span class="obfuscator">.nosp@m.</span>boso<span class="obfuscator">.nosp@m.</span>ft.ai</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
